generator client {
  provider = "prisma-client"
  output   = "../generated/client"
  moduleFormat = "cjs" 
}

datasource db {
  provider = "postgresql"
}

model Extraction {
  id            String           @id @default(uuid())
  userId        String
  filename      String
  imageUrl      String           @map("image_url")
  status        ExtractionStatus
  date          DateTime?
  currency      String?          @db.VarChar(3)
  vendorName    String?          @map("vendor_name")
  items         Json?
  tax           Decimal?         @db.Decimal(10, 2)
  total         Decimal?         @db.Decimal(10, 2)
  failureReason String?          @map("failure_reason") @db.Text
  createdAt     DateTime         @default(now()) @map("created_at")
  updatedAt     DateTime         @updatedAt @map("updated_at")

  @@index([id, createdAt])
  @@index([status])
  @@map("extractions")
}

enum ExtractionStatus {
  SUBMITTING
  EXTRACTING
  EXTRACTED
  INVALID
  FAILED
}